<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Ashey | Shop Analytics</title>

<style>
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: Arial, sans-serif;
  }
  body {
    font-family: "Bahnschrift", Arial, sans-serif;
    margin: 20px;
  }
  .dashboard {
    border: 1px solid #ccc;
    padding: 20px;
    margin-top: 20px;
  }
  h2 {
    margin-bottom: 10px;
  }
  p {
    margin: 5px 0;
  }
  .products {
    margin-top: 20px;
  }
  .product {
    margin: 10px;
    display: inline-block;
  }
  a {
    text-decoration: none;
    color: blue;
  }

  body {
    display: flex;
    height: 100vh;
  }

  /* Left Content Section */
  .left {
    width: 50%;
    padding: 40px;
    background: #ffffff;
  }

  /* Logo */
  .logo {
    font-size: 28px;
    font-weight: bold;
    margin-bottom: 30px;
  }

  .logo a {
    text-decoration: none;
    color: #007bff;
  }

  h1 {
    margin-bottom: 20px;
  }

  .products {
    margin: 20px 0;
  }

  .product {
    margin-bottom: 10px;
  }

  .product a {
    text-decoration: none;
    color: #333;
    font-weight: 500;
  }

  .product a:hover {
    color: #007bff;
  }

  .dashboard {
    margin-top: 30px;
    padding: 20px;
    background: #f5f5f5;
    border-radius: 8px;
  }

  .dashboard h2 {
    margin-bottom: 15px;
  }

  .dashboard p {
    margin: 6px 0;
    color: #444;
  }

  /* Right Background Image Section */
  .right {
    width: 50%;
    background: url('https://images.pexels.com/photos/3851254/pexels-photo-3851254.jpeg?cs=srgb&dl=pexels-pressmaster-3851254.jpg&fm=jpg') no-repeat center center/cover;
  }

  /* Responsive */
  @media(max-width: 768px) {
    body {
      flex-direction: column;
    }

    .left, .right {
      width: 100%;
      height: 50vh;
    }
  }

</style>
</head>

<body>

<!-- LEFT SECTION -->
<div class="left">

  <div class="logo">
    <a href="index.html">Ashey</a>
  </div>

  <h1>Welcome to My Shop</h1>

  <div class="products">
    <div class="product"><a href="product.html?id=1">Laptop</a></div>
    <div class="product"><a href="product.html?id=2">Smartphone</a></div>
    <div class="product"><a href="product.html?id=3">Headphones</a></div>
    <div class="product"><a href="product.html?id=4">Camera</a></div>
    <div class="product"><a href="product.html?id=5">Smartwatch</a></div>
  </div>

  <div class="dashboard">
    <h2>Site Analytics</h2>
    <p>Total Visits: <span id="visits">0</span></p>
    <p>Unique Visitors: <span id="visitors">0</span></p>
    <p>Total Time on Site: <span id="siteTime">0</span> seconds</p>
    <p>Conversion Rate: <span id="conversion">0</span>%</p>
  </div>

</div>

<!-- RIGHT SECTION -->
<div class="right"></div>

<script>
  // --- Visit Count ---
  let visits = localStorage.getItem("site_visits") || 0;
  visits++;
  localStorage.setItem("site_visits", visits);
  document.getElementById("visits").textContent = visits;

  // --- Unique Visitors ---
  function getCookie(name) {
    let match = document.cookie.match(new RegExp('(^| )' + name + '=([^;]+)'));
    return match ? match[2] : null;
  }

  if (!getCookie("uniqueVisitor")) {
    document.cookie = "uniqueVisitor=true; path=/";
    let visitors = localStorage.getItem("site_visitors") || 0;
    visitors++;
    localStorage.setItem("site_visitors", visitors);
  }

  document.getElementById("visitors").textContent =
    localStorage.getItem("site_visitors") || 1;

  // --- Time on Site ---
  let siteTime = localStorage.getItem("site_time") || 0;
  let startTime = Date.now();

  setInterval(() => {
    let elapsed = Math.floor((Date.now() - startTime) / 1000);
    document.getElementById("siteTime").textContent =
      parseInt(siteTime) + elapsed;
  }, 1000);

  // --- Conversion Rate ---
  function updateConversionRate() {
    let totalVisits = 0;
    let totalConversions = 0;

    for (let i = 1; i <= 5; i++) {
      totalVisits += parseInt(localStorage.getItem(`product_${i}_visits`) || 0);
      totalConversions += parseInt(localStorage.getItem(`product_${i}_conversions`) || 0);
    }

    let rate = totalVisits > 0
      ? ((totalConversions / totalVisits) * 100).toFixed(1)
      : 0;

    document.getElementById("conversion").textContent = rate;
  }

  updateConversionRate();
</script>

</body>
</html>
